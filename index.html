<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- Font Awesome -->
    <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
            rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link
            href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
            rel="stylesheet"
    />
    <!-- MDB -->
    <link
            href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.css"
            rel="stylesheet"
    />
    <!-- MDB -->
    <script
            type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.js"
    ></script>

</head>
<body>

<form id="form" method="post" action="">
    <input name="tableauProf" id="tableauProf" value="" style="display:none;">
    <input name="tableauMatiere" id="tableauMatiere" value="" style="display:none;">

    <div class="table-responsive">
        <p>Ajouts professeurs</p>
    <TABLE class="table align-middle" id="dataTableProf" width="350px" border="1">
        <thead>
        <tr>
            <th scope="col">Id</th>
            <th scope="col">Nom</th>
            <th scope="col">Competence</th>
            <th scope="col">Suppression</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td scope="row" class="idProf"><input type="number" value="" id="idProf1" name="idProf1"></td>
            <td class="nameProf"><input type="text" value="" id="nameProf1" name="nameProf1"></td>
            <td class="competencesProf"><input type="text" value="" id="competencesProf1" name="competencesProf1"></td>
        </tr>
        </tbody>
    </TABLE>
        <INPUT type="button" value="Add Row" onclick="addRow('dataTableProf')" />
    </div>

    <div class="table-responsive">
        <p>Ajouts matieres</p>
    <table class="table align-middle" id="dataTableCourse" width="10%" border="1">
        <thead>
        <tr>
            <th scope="col">Id</th>
            <th scope="col">Nom</th>
            <th scope="col">Nombre d'heure</th>
            <th scope="col">Competence</th>
            <th scope="col">Enseignant</th>
            <th scope="col">Nombre d'etudiant</th>
            <th scope="col">Salle de cours</th>
            <th scope="col">Suppression</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td scope="row" class="idCourse"><input type="number" value="" id="idCourse1"name="idCourse1"></td>
            <td class="nameProfCourse"><input type="text" value="" id="nameProfCourse1" name="nameProfCourse1"></td>
            <td class="competencesProfMatiere"><input type="number" value="" id="competencesProfMatiere1" name="competencesProf1"></td>
            <td class="competenceMatiere"><input type="number" value="" id="competenceMatiere1" name="competenceMatiere1"></td>
            <td class="enseignant"><input type="text" value="" id="enseignant1" name="enseignant1"></td>
            <td class="nbEtudiant"><input type="number" value="" id="nbEtudiant1" name="nbEtudiant1"></td>
            <td class="salleCours"><input type="text" value="" id="salleCours1" name="salleCours1"></td>
        </tr>
        </tbody>
    </table>
    </div>
    <input type="button" value="Add Row" onclick="addRow('dataTableCourse')" />
    <button type="button" class="btn btn-primary btn-block" onclick="remplissageTableau('dataTableCourse','tableauMatiere');remplissageTableau('dataTableProf','tableauProf');submitForm()">Valider</button>


    <br><br>

</form>

<SCRIPT language="javascript">
    var test = document.getElementById('dataTableCourse').rows[0].cells.length
    var ipnt = document.getElementById('button1').onclick
    var testName = document.getElementById('dataTableCourse').rows[0].cells[0].className
    var testTd = document.getElementById('dataTableCourse').rows[0].cells[0]
    function addRow(tableID) {
        try {
            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);
            var nbColonne = document.getElementById(tableID).rows[0].cells.length
            for (var i = 0; i < nbColonne -1; i++) {
                //Column
                var idNameCell = document.getElementById(tableID).rows[1].cells[i].className
                var cell = row.insertCell(i);
                var element = document.createElement("input");
                element.type = document.getElementById(idNameCell + '1').type; //Nom de la cellule + 1 pour avoir la 1ere rows du tableau
                var btnName = idNameCell + (rowCount);
                element.id = btnName;
                element.name = btnName;
                cell.appendChild(element);
            }
            //Column Delete
            var cell = row.insertCell(-1);
            var element = document.createElement("input");
            element.type = "button";
            var btnName = "button" + (rowCount);
            element.name = btnName;
            element.setAttribute('value', 'Delete'); // or element.value = "Delete";
            //element.onclick = function () { removeRow(btnName, tableID); }
            element.setAttribute("onclick", "removeRow('"+btnName+"', '"+tableID+"')");
            cell.appendChild(element);
        }
        catch (e) {
            alert(e);
        }
    }

    function removeRow(btnName, tableID) {
        try {
            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;
            var nbColonne = document.getElementById(tableID).rows[0].cells.length-1
            //i=1 pour sauter la 1ere ligne correspondant au titre du tableau
            for (var i = 2; i < rowCount; i++) {
                var row = table.rows[i];
                var rowObj = row.cells[nbColonne].childNodes[0];
                var nametest = rowObj.name
                if (rowObj.name == btnName) {
                    table.deleteRow(i);
                    rowCount--;
                }
            }
        }
        catch (e) {
            alert(e);
        }
    }

    function remplissageTableau(tableID, tableauToAdd) {
        try {
            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;
            var nbColonne = document.getElementById(tableID).rows[0].cells.length
            var tableauFinal = []
            for (i = 1; i < rowCount; i++) {
                var tableau = {};
                for (var c = 0; c < nbColonne - 1; c++) {
                    var idNameCell = document.getElementById(tableID).rows[1].cells[c].className
                    tableau[idNameCell] = document.getElementById(idNameCell + i).value
                }
                tableauFinal.push(tableau)
            }
            var jsonArray = JSON.stringify(tableauFinal);
            document.getElementById(tableauToAdd).value = jsonArray;
            var test = document.getElementById(tableauToAdd).value
        }catch (e) {
            alert(e);
        }

    }

    function submitForm(){
        var tableauProf = document.getElementById('tableauProf').value
        objProf = JSON.parse(tableauProf)
        var tableauMatiere = document.getElementById('tableauMatiere').value
        objMatiere = JSON.parse(tableauMatiere)
        document.forms["form"].submit();
    }
</SCRIPT>

<script src="FD.js/fd.js"></script>
<script src="models/Course.js"></script>
<script src="models/Slot.js"></script>
<script src="models/Teacher.js"></script>
<script src="models/Lecture.js"></script>
<script src="models/AmphiTeacher.js"></script>
<script src="models/Competence.js"></script>
<script src="models/Room.js"></script>
<script src="models/PhysicalRoom.js"></script>
<script src="models/TdTeacher.js"></script>
<script src="models/Timetable.js"></script>
<script src="models/ZoomRoom.js"></script>
<script src="testPart1.js"></script>
<script src="testConstraint.js"></script>
<script src="testPart3.js"></script>
</body>
</html>
